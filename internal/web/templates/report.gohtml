<html lang="en">
<head>
    <title>{{.Config.Content.Title}} | Report</title>
    <link rel="stylesheet" href="/static/web/dist/main.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body class="bg-gray-50">
{{template "header" .Config}}
<div class="container">


    {{if not .IsAdministrator}}
        <p>
            This page allows you to further communicate with us about the report you filed.<br>
            Make sure to <b>bookmark, save, write down, etc.</b> the URL and check for our answers and questions
            regularly.
        </p>
    {{else}}
    <div style="margin: auto" x-data="{status: '{{.Report.State}}', text:'{{.Report.State}}'}">
        <span role="button" class="pill pointer" :style="'background-color:'+(status=='open'?'rgb(220 38 38)':'rgb(74 222 128)')" x-text="text"
              @mouseover="text=(status=='open'?'close':'reopen')" @mouseleave="text=status"
              @click="status=(status=='open'?'done':'open'); fetch('/setStatus/'+'{{.Report.AdministratorToken}}', {method:'POST', body: JSON.stringify({status: status})})"></span>
    </div>
    {{end}}
    <hr>
    {{$admin := .IsAdministrator}}
    {{range .Report.Messages}}
        <div class="chat {{if eq .IsAdmin $admin}}chat-end{{else}}chat-start{{end}}">
            <div class="chat-bubble">
                <span style="font-weight: bold; color:#3070b3">
                    {{.CreatedAt.Format "02.01.2006 15:04"}}
                </span>
                <p>
                    {{.GetBody}}
                </p>
            </div>
        </div>
    {{end}}
    <hr>
    <form class="row" method="post">
        <label class="12 columns">
            Reply
            <textarea name="reply" class="12 columns"></textarea>
        </label>
        <input type="submit" value="Absenden">
    </form>
</div>
</body>
</html>
